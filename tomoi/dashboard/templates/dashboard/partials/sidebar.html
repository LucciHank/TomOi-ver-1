<!-- Sidebar -->
<ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

    <!-- Sidebar - Brand -->
    <a class="sidebar-brand d-flex align-items-center justify-content-center" href="{% url 'dashboard:index' %}">
        <div class="sidebar-brand-icon rotate-n-15">
            <i class="fas fa-laugh-wink"></i>
        </div>
        <div class="sidebar-brand-text mx-3">TomOi <sup>Admin</sup></div>
    </a>

    <!-- Divider -->
    <hr class="sidebar-divider my-0">

    <!-- Nav Item - Dashboard -->
    <li class="nav-item active">
        <a class="nav-link" href="{% url 'dashboard:index' %}">
            <i class="fas fa-fw fa-tachometer-alt"></i>
            <span>Trang chính</span>
        </a>
    </li>

    <!-- Divider -->
    <hr class="sidebar-divider">

    <!-- Heading -->
    <div class="sidebar-heading">
        Quản lý người dùng
    </div>

    <!-- Nav Item - Users -->
    <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseUsers"
            aria-expanded="false" aria-controls="collapseUsers">
            <i class="fas fa-fw fa-users"></i>
            <span>Người dùng</span>
        </a>
        <div id="collapseUsers" class="collapse" aria-labelledby="headingUsers"
            data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
                <h6 class="collapse-header">Quản lý người dùng:</h6>
                <a class="collapse-item" href="{% url 'dashboard:user_list' %}">Danh sách</a>
                <a class="collapse-item" href="{% url 'dashboard:user_dashboard' %}">Thống kê</a>
                <a class="collapse-item" href="{% url 'dashboard:user_add' %}">Thêm mới</a>
            </div>
        </div>
    </li>

    <!-- Nav Item - Messaging -->
    <li class="nav-item">
        <a class="nav-link" href="{% url 'dashboard:messaging' %}">
            <i class="fas fa-fw fa-comment-dots"></i>
            <span>Nhắn tin</span>
        </a>
    </li>
    
    <!-- Nav Item - Complaints -->
    <li class="nav-item">
        <a class="nav-link" href="{% url 'dashboard:complaints' %}">
            <i class="fas fa-fw fa-exclamation-circle"></i>
            <span>Khiếu nại</span>
        </a>
    </li>
    
    <!-- Nav Item - Warranty -->
    <li class="nav-item">
        <a class="nav-link" href="{% url 'dashboard:warranty' %}">
            <i class="fas fa-fw fa-shield-alt"></i>
            <span>Bảo hành</span>
        </a>
    </li>

    <!-- Divider -->
    <hr class="sidebar-divider">

    <!-- Heading -->
    <div class="sidebar-heading">
        Cửa hàng
    </div>

    <!-- Nav Item - Products Collapse Menu -->
    <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseProducts"
            aria-expanded="false" aria-controls="collapseProducts">
            <i class="fas fa-fw fa-box"></i>
            <span>Sản phẩm</span>
        </a>
        <div id="collapseProducts" class="collapse" aria-labelledby="headingProducts"
            data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
                <h6 class="collapse-header">Quản lý sản phẩm:</h6>
                <a class="collapse-item" href="/dashboard/products/">Danh sách</a>
                <a class="collapse-item" href="/dashboard/products/categories/">Danh mục</a>
                <a class="collapse-item" href="/dashboard/products/add/">Thêm mới</a>
            </div>
        </div>
    </li>

    <!-- Nav Item - Orders -->
    <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseOrders"
            aria-expanded="false" aria-controls="collapseOrders">
            <i class="fas fa-fw fa-shopping-cart"></i>
            <span>Đơn hàng</span>
        </a>
        <div id="collapseOrders" class="collapse" aria-labelledby="headingOrders"
            data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
                <h6 class="collapse-header">Quản lý đơn hàng:</h6>
                <a class="collapse-item" href="{% url 'dashboard:order_management' %}">Tất cả đơn hàng</a>
                <a class="collapse-item" href="{% url 'dashboard:order_management' %}?status=pending">Chờ xử lý</a>
                <a class="collapse-item" href="{% url 'dashboard:export_orders' %}">Xuất báo cáo</a>
            </div>
        </div>
    </li>

    <!-- Divider -->
    <hr class="sidebar-divider">

    <!-- Heading -->
    <div class="sidebar-heading">
        Marketing
    </div>

    <!-- Nav Item - Marketing -->
    <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseMarketing"
            aria-expanded="true" aria-controls="collapseMarketing">
            <i class="fas fa-fw fa-bullhorn"></i>
            <span>Marketing</span>
        </a>
        <div id="collapseMarketing" class="collapse" aria-labelledby="headingMarketing"
            data-parent="#accordionSidebar">
            <div class="bg-white py-2 collapse-inner rounded">
                <h6 class="collapse-header">Công cụ Marketing:</h6>
                <a class="collapse-item" href="{% url 'dashboard:marketing' %}">Chiến dịch</a>
                <a class="collapse-item" href="{% url 'dashboard:discounts' %}">Mã giảm giá</a>
                <a class="collapse-item" href="{% url 'dashboard:banners' %}">Banner</a>
            </div>
        </div>
    </li>

    <!-- Divider -->
    <hr class="sidebar-divider d-none d-md-block">

    <!-- Sidebar Toggler (Sidebar) -->
    <div class="text-center d-none d-md-inline">
        <button class="rounded-circle border-0" id="sidebarToggle">
            <i class="fas fa-angle-left text-white"></i>
        </button>
    </div>

</ul>
<!-- End of Sidebar -->

<!-- CSS cho hiệu ứng đẹp hơn -->
<style>
    /* Sửa lỗi sidebar bị xếp ngang */
    .sidebar {
        position: fixed;
        height: 100vh;
        z-index: 1;
        overflow-y: auto;
        width: 225px;
    }

    .sidebar .nav-item {
        display: block;
        width: 100%;
    }

    .sidebar .nav-link {
        display: block;
        width: 100%;
        text-align: left;
        padding: 0.75rem 1rem;
        width: 225px;
    }

    /* Phần nội dung chính */
    #content-wrapper {
        margin-left: 225px;
        width: calc(100% - 225px);
        transition: all 0.3s;
    }

    /* Khi sidebar được thu gọn */
    body.sidebar-toggled .sidebar {
        width: 6.5rem !important;
    }

    body.sidebar-toggled #content-wrapper {
        margin-left: 6.5rem;
        width: calc(100% - 6.5rem);
    }

    .sidebar.toggled .nav-item .nav-link {
        width: 6.5rem;
        text-align: center;
        padding: 0.75rem 1rem;
    }

    .sidebar.toggled .nav-item .nav-link span {
        display: none;
    }

    .sidebar.toggled .sidebar-brand .sidebar-brand-text {
        display: none;
    }

    /* Đảm bảo nội dung không bị đè */
    #content-wrapper {
        margin-left: 225px;
        transition: margin 0.3s;
    }

    /* Điều chỉnh khi sidebar được thu gọn */
    body.sidebar-toggled #content-wrapper {
        margin-left: 104px;
    }

    .sidebar.toggled {
        width: 104px !important;
        overflow: visible;
    }

    /* Điều chỉnh hiển thị của các menu item */
    .sidebar .nav-item {
        position: relative;
        margin-bottom: 3px;
    }

    .sidebar .nav-item .collapse {
        position: absolute;
        left: calc(100% + 1px);
        z-index: 1;
        top: 0;
        width: 200px;
        max-height: 300px;
        overflow-y: auto;
        background-color: #fff;
        border-radius: 0.35rem;
        box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
    }

    .sidebar .nav-item .collapse.show,
    .sidebar .nav-item .collapsing {
        margin-left: 0;
        display: block;
    }

    .sidebar.toggled .nav-item .collapse {
        position: absolute;
        left: calc(100%);
        top: 0;
    }

    .sidebar.toggled .nav-item .collapse.show,
    .sidebar.toggled .nav-item .collapsing {
        margin-left: 0;
        display: block;
    }

    /* Sidebar animation và hover effects */
    .hover-effect:hover {
        background: rgba(255, 255, 255, 0.1);
        transform: translateX(5px);
        transition: all 0.3s ease;
    }
    
    .hover-subtle:hover {
        background: rgba(78, 115, 223, 0.1);
        color: #4e73df;
        transform: translateX(3px);
        transition: all 0.2s ease;
    }
    
    .fa-spin-hover:hover {
        animation: fa-spin 2s infinite linear;
    }
    
    .sidebar-heading {
        letter-spacing: 1px;
        font-weight: 700;
    }
    
    .pulse-link {
        position: relative;
        overflow: hidden;
    }
    
    .pulse-badge {
        animation: pulse-animation 2s infinite;
    }
    
    @keyframes pulse-animation {
        0% {
            box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7);
        }
        70% {
            box-shadow: 0 0 0 10px rgba(40, 167, 69, 0);
        }
        100% {
            box-shadow: 0 0 0 0 rgba(40, 167, 69, 0);
        }
    }
    
    .shadow-pulse {
        animation: shadow-pulse 2s infinite;
        transition: all 0.3s ease;
    }
    
    @keyframes shadow-pulse {
        0% {
            box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.3);
        }
        70% {
            box-shadow: 0 0 0 5px rgba(255, 255, 255, 0);
        }
        100% {
            box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
        }
    }
    
    .sidebar-card {
        background: linear-gradient(135deg, #4e73df 0%, #224abe 100%);
        color: white;
        margin: 1rem;
        border-radius: 0.5rem;
        padding: 1rem;
        transition: all 0.3s ease;
    }
    
    .sidebar-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }
    
    .sidebar-card-illustration {
        max-width: 60px;
        margin: 0 auto;
        filter: drop-shadow(0px 3px 3px rgba(0, 0, 0, 0.2));
    }
    
    #sidebarToggle {
        position: relative;
        transition: all 0.3s ease;
    }
    
    #sidebarToggle:hover {
        background-color: white;
        color: #4e73df;
        transform: scale(1.1);
    }
    
    #accordionSidebar {
        background: linear-gradient(180deg, #4e73df 10%, #224abe 100%);
        background-size: cover;
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    }
    
    .sidebar-brand {
        height: 5rem;
        transition: all 0.3s ease;
    }
    
    .sidebar-brand:hover {
        background: rgba(255, 255, 255, 0.1);
    }
    
    .collapse-inner {
        border-left: 3px solid #4e73df;
        transition: all 0.3s ease;
    }
    
    .collapse-header {
        font-weight: 700;
        letter-spacing: 0.05rem;
    }

    /* Thêm hiệu ứng biến đổi cho menu items */
    .nav-item {
        transition: background-color 0.3s ease, transform 0.3s ease;
        position: relative;
    }

    .nav-item:hover::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
        width: 4px;
        background: linear-gradient(180deg, #ffffff 0%, rgba(255,255,255,0.5) 100%);
        animation: slideIn 0.3s ease-in-out;
    }

    @keyframes slideIn {
        from { opacity: 0; transform: translateX(-10px); }
        to { opacity: 1; transform: translateX(0); }
    }

    /* Badges tùy chỉnh */
    .badge {
        transition: all 0.3s ease;
    }

    .badge-info, .badge-light {
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .nav-item:hover .badge {
        transform: scale(1.1);
    }

    /* Menu dropdown animation */
    .collapse {
        transition: height 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    }

    /* Sidebar dark mode toggle - có thể thêm nếu muốn */
    .theme-switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 24px;
        margin: 15px auto;
    }

    .theme-switch input { 
        opacity: 0;
        width: 0;
        height: 0;
    }

    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: .4s;
        border-radius: 34px;
    }

    .slider:before {
        position: absolute;
        content: "";
        height: 16px;
        width: 16px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
    }

    input:checked + .slider {
        background-color: #1cc88a;
    }

    input:checked + .slider:before {
        transform: translateX(26px);
    }
</style> 