{% extends 'dashboard/base.html' %}
{% load static %}
{% load humanize %}

{% block title %}Quản lý giao dịch tài khoản{% endblock %}

{% block content %}
<div class="container-fluid">
    <h1 class="h3 mb-2 text-gray-800">Quản lý giao dịch tài khoản</h1>
    <p class="mb-4">Quản lý các giao dịch liên quan đến tài khoản premium.</p>

    <!-- Bộ lọc -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Bộ lọc</h6>
        </div>
        <div class="card-body">
            <form class="row g-3">
                <div class="col-md-3">
                    <label for="filterDateFrom" class="form-label">Từ ngày</label>
                    <input type="date" class="form-control" id="filterDateFrom">
                </div>
                <div class="col-md-3">
                    <label for="filterDateTo" class="form-label">Đến ngày</label>
                    <input type="date" class="form-control" id="filterDateTo">
                </div>
                <div class="col-md-3">
                    <label for="filterStatus" class="form-label">Trạng thái</label>
                    <select class="form-control" id="filterStatus">
                        <option value="">Tất cả</option>
                        <option value="success">Thành công</option>
                        <option value="pending">Đang xử lý</option>
                        <option value="failed">Thất bại</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label for="filterType" class="form-label">Loại giao dịch</label>
                    <select class="form-control" id="filterType">
                        <option value="">Tất cả</option>
                        <option value="purchase">Mua mới</option>
                        <option value="renewal">Gia hạn</option>
                        <option value="refund">Hoàn tiền</option>
                    </select>
                </div>
                <div class="col-12 mt-3">
                    <button type="submit" class="btn btn-primary">Lọc</button>
                    <button type="reset" class="btn btn-secondary">Đặt lại</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Danh sách giao dịch -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Giao dịch tài khoản</h6>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                    <thead>
                        <tr>
                            <th>Mã giao dịch</th>
                            <th>Người dùng</th>
                            <th>Loại tài khoản</th>
                            <th>Thời hạn</th>
                            <th>Số tiền</th>
                            <th>Phương thức</th>
                            <th>Trạng thái</th>
                            <th>Thời gian</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Dữ liệu mẫu -->
                        <tr>
                            <td>TX-123456</td>
                            <td>user123</td>
                            <td>Netflix Premium</td>
                            <td>1 tháng</td>
                            <td>120,000 VNĐ</td>
                            <td>Momo</td>
                            <td><span class="badge badge-success">Thành công</span></td>
                            <td>01/03/2025 14:30</td>
                            <td>
                                <a href="#" class="btn btn-sm btn-info">
                                    <i class="fas fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td>TX-123457</td>
                            <td>user456</td>
                            <td>Netflix Standard</td>
                            <td>3 tháng</td>
                            <td>216,000 VNĐ</td>
                            <td>VNPay</td>
                            <td><span class="badge badge-success">Thành công</span></td>
                            <td>01/03/2025 15:45</td>
                            <td>
                                <a href="#" class="btn btn-sm btn-info">
                                    <i class="fas fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td>TX-123458</td>
                            <td>user789</td>
                            <td>Netflix Basic</td>
                            <td>6 tháng</td>
                            <td>250,000 VNĐ</td>
                            <td>Thẻ cào</td>
                            <td><span class="badge badge-warning">Đang xử lý</span></td>
                            <td>01/03/2025 16:20</td>
                            <td>
                                <a href="#" class="btn btn-sm btn-info">
                                    <i class="fas fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    $(document).ready(function() {
        $('#dataTable').DataTable({
            "order": [[7, "desc"]],
            "language": {
                "url": "//cdn.datatables.net/plug-ins/1.10.25/i18n/Vietnamese.json"
            }
        });
    });
</script>
{% endblock %} 